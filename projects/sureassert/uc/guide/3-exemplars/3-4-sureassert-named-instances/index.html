<!DOCTYPE html>
<html lang="en-US">

<!-- Mirrored from www.sureassert.com/uc/guide/3-exemplars/3-4-sureassert-named-instances/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 04 Mar 2017 11:45:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<link rel="shortcut icon" href="../../../../wp-content/themes/twentyten/favicon.ico" type="image/x-icon" />
<link rel="icon" href="../../../../wp-content/themes/twentyten/favicon.ico" type="image/x-icon" />
<meta charset="UTF-8" />
<title>3.4. Sureassert Named Instances | Sureassert UC</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="../../../../wp-content/themes/twentyten/style.css" />
<link rel="pingback" href="../../../../xmlrpc.php" />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="Sureassert UC &raquo; Feed" href="../../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Sureassert UC &raquo; Comments Feed" href="../../../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Sureassert UC &raquo; 3.4. Sureassert Named Instances Comments Feed" href="feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.sureassert.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.2"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='https://api.w.org/' href='../../../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.7.2" />
<link rel="canonical" href="index.html" />
<link rel='shortlink' href='../../../index0364.html?p=364' />
<link rel="alternate" type="application/json+oembed" href="../../../wp-json/oembed/1.0/embed861d.json?url=http%3A%2F%2Fwww.sureassert.com%2Fuc%2Fguide%2F3-exemplars%2F3-4-sureassert-named-instances%2F" />
<link rel="alternate" type="text/xml+oembed" href="../../../wp-json/oembed/1.0/embed5ab0?url=http%3A%2F%2Fwww.sureassert.com%2Fuc%2Fguide%2F3-exemplars%2F3-4-sureassert-named-instances%2F&amp;format=xml" />
<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #ffffff; }
</style>
<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body class="page-template-default page page-id-364 page-child parent-pageid-296 custom-background">
<div id="wrapper" class="hfeed">
	<div id="header">
		<div id="masthead">
			
			<div id="branding" role="banner">
				<!--
								<div id="site-title">
					<span>
						<a href="http://www.sureassert.com/uc/" title="Sureassert UC" rel="home">Sureassert UC</a>
					</span>
				</div>
				<div id="site-description"></div>
				-->
										<img src="../../../../wp-content/uploads/2011/03/Sureassert7.png" width="940" height="198" alt="" />
								</div><!-- #branding -->
			
			<div id="access" role="navigation">
			  				<div class="skip-link screen-reader-text"><a href="#content" title="Skip to content">Skip to content</a></div>
								<div class="menu"><ul>
<li ><a href="../../../index.html">Home</a></li><li class="page_item page-item-232"><a href="../../../news/index.html">News</a></li>
<li class="page_item page-item-43 page_item_has_children"><a href="../../../features/index.html">Features</a>
<ul class='children'>
	<li class="page_item page-item-51"><a href="../../../features/use-cases/index.html">Exemplars</a></li>
	<li class="page_item page-item-53"><a href="../../../features/automatic-continuous-testing/index.html">Automatic Continuous Testing</a></li>
	<li class="page_item page-item-55"><a href="../../../features/real-time-continuous-test-coverage-reporting/index.html">Real-Time Continuous Test Coverage Reporting</a></li>
	<li class="page_item page-item-59"><a href="../../../features/declarative-stubbing/index.html">Declarative Stubbing</a></li>
	<li class="page_item page-item-61"><a href="../../../features/comprehensive-junit-integration/index.html">Comprehensive JUnit integration</a></li>
</ul>
</li>
<li class="page_item page-item-304 page_item_has_children current_page_ancestor"><a href="../../index.html">Guide</a>
<ul class='children'>
	<li class="page_item page-item-289 page_item_has_children"><a href="../../1-key-concepts/index.html">1. Key Concepts</a>
	<ul class='children'>
		<li class="page_item page-item-323"><a href="../../1-key-concepts/1-1-declarative-unit-testing-with-exemplars/index.html">1.1. Declarative Unit Testing with Exemplars</a></li>
		<li class="page_item page-item-325"><a href="../../1-key-concepts/continuous-unit-testing/index.html">1.2. Continuous Unit Testing</a></li>
		<li class="page_item page-item-329"><a href="../../1-key-concepts/1-3-real-time-test-coverage-reporting/index.html">1.3. Real-time Test Coverage Reporting</a></li>
		<li class="page_item page-item-333"><a href="../../1-key-concepts/1-4-junit-integration/index.html">1.4. JUnit Integration</a></li>
		<li class="page_item page-item-335"><a href="../../1-key-concepts/1-5-about-adding-the-sureassert-dependency/index.html">1.5. About Adding the Sureassert Dependency</a></li>
		<li class="page_item page-item-337"><a href="../../1-key-concepts/1-6-about-adding-declarative-tests-to-your-production-code/index.html">1.6. About Adding Declarative Tests to your Production Code</a></li>
		<li class="page_item page-item-340"><a href="../../1-key-concepts/1-7-use-cases/index.html">1.7. Use Cases</a></li>
		<li class="page_item page-item-342"><a href="../../1-key-concepts/1-8-stubbing-and-mocking/index.html">1.8. Stubbing and Mocking</a></li>
	</ul>
</li>
	<li class="page_item page-item-291 page_item_has_children"><a href="../../2-the-sureassert-uc-engine-for-eclipse/index.html">2. The Sureassert UC Engine for Eclipse</a>
	<ul class='children'>
		<li class="page_item page-item-348"><a href="../../2-the-sureassert-uc-engine-for-eclipse/2-1-automatic-incremental-execution/index.html">2.1. Automatic Incremental Execution</a></li>
		<li class="page_item page-item-350"><a href="../../2-the-sureassert-uc-engine-for-eclipse/2-2-the-background-uc-engine/index.html">2.2. The Background UC Engine</a></li>
		<li class="page_item page-item-352"><a href="../../2-the-sureassert-uc-engine-for-eclipse/2-3-forcing-sureassert-uc-execution/index.html">2.3. Forcing Sureassert UC Execution</a></li>
		<li class="page_item page-item-354"><a href="../../2-the-sureassert-uc-engine-for-eclipse/2-4-debugging-exemplars-and-junits-with-sureassert-uc/index.html">2.4. Debugging Exemplars and JUnits</a></li>
		<li class="page_item page-item-356"><a href="../../2-the-sureassert-uc-engine-for-eclipse/2-5-testing-deadlocks-and-stopping-the-uc-engine/index.html">2.5. Testing Deadlocks and Stopping the UC Engine</a></li>
	</ul>
</li>
	<li class="page_item page-item-296 page_item_has_children current_page_ancestor current_page_parent"><a href="../index.html">3. Exemplars</a>
	<ul class='children'>
		<li class="page_item page-item-358"><a href="../3-1-annotating-methods-with-exemplars/index.html">3.1. Annotating Methods with Exemplars</a></li>
		<li class="page_item page-item-360"><a href="../3-2-passing-method-arguments/index.html">3.2. Passing Method Arguments</a></li>
		<li class="page_item page-item-362"><a href="../3-3-sin-expressions/index.html">3.3. SIN Expressions</a></li>
		<li class="page_item page-item-364 current_page_item"><a href="index.html">3.4. Sureassert Named Instances</a></li>
		<li class="page_item page-item-366"><a href="../3-5-specifying-and-initializing-the-object-under-test/index.html">3.5. Specifying and Initializing the Object Under Test</a></li>
		<li class="page_item page-item-368"><a href="../3-6-viewing-results-and-other-test-information/index.html">3.6. Viewing Results and Other Test Information</a></li>
		<li class="page_item page-item-370"><a href="../3-7-asserting-expected-results/index.html">3.7. Asserting Expected Results</a></li>
		<li class="page_item page-item-372"><a href="../3-8-using-exemplars-in-interfaces-and-abstract-classes/index.html">3.8. Using Exemplars in Interfaces and Abstract Classes</a></li>
		<li class="page_item page-item-374"><a href="../3-9-setup-and-tear-down-before-and-after/index.html">3.9. Setup and Tear-down (before and after)</a></li>
		<li class="page_item page-item-376"><a href="../3-10-further-documenting-your-exemplars/index.html">3.10. Further Documenting your Exemplars</a></li>
		<li class="page_item page-item-378"><a href="../3-11-shorthand-exemplar-properties/index.html">3.11. Shorthand Exemplar Properties</a></li>
		<li class="page_item page-item-380"><a href="../3-12-inner-classes/index.html">3.12. Inner Classes</a></li>
		<li class="page_item page-item-498"><a href="../3-13-avoiding-duplication-in-exemplars-using-the-template-property/index.html">3.13. Avoiding Duplication with Templates</a></li>
	</ul>
</li>
	<li class="page_item page-item-299"><a href="../../4-in-line-assertions/index.html">4. In-line Assertions</a></li>
	<li class="page_item page-item-475 page_item_has_children"><a href="../../5-test-isolation/index.html">5. Test Isolation</a>
	<ul class='children'>
		<li class="page_item page-item-477"><a href="../../5-test-isolation/5-1-test-doubles/index.html">5.1. Test Doubles</a></li>
		<li class="page_item page-item-481"><a href="../../5-test-isolation/5-2-method-stubs/index.html">5.2. Method Stubs</a></li>
		<li class="page_item page-item-486"><a href="../../5-test-isolation/5-3-source-stubs-%e2%80%93-directly-manipulating-the-code-under-test/index.html">5.3. Source Stubs</a></li>
		<li class="page_item page-item-492"><a href="../../5-test-isolation/5-4-expecting-stub-invocation-vstubs/index.html">5.4. Expecting Stub Invocation: vstubs</a></li>
		<li class="page_item page-item-495"><a href="../../5-test-isolation/5-5-default-classes/index.html">5.5. Default Classes</a></li>
	</ul>
</li>
	<li class="page_item page-item-512 page_item_has_children"><a href="../../6-behaviour-verification/index.html">6. Behaviour Verification</a>
	<ul class='children'>
		<li class="page_item page-item-520"><a href="../../6-behaviour-verification/6-1-using-verify-to-perform-behaviour-verification/index.html">6.1. Using verify To Perform Behaviour Verification</a></li>
		<li class="page_item page-item-522"><a href="../../6-behaviour-verification/6-2-verifying-stub-invocation/index.html">6.2. Verifying Stub Invocation</a></li>
	</ul>
</li>
	<li class="page_item page-item-525 page_item_has_children"><a href="../../7-coverage-reporting/index.html">7. Coverage Reporting</a>
	<ul class='children'>
		<li class="page_item page-item-528"><a href="../../7-coverage-reporting/7-1-graphical-in-line-reporting/index.html">7.1. Graphical In-Line Reporting</a></li>
		<li class="page_item page-item-530"><a href="../../7-coverage-reporting/7-2-file-level-information-warnings-and-errors/index.html">7.2. File-level Information, Warnings and Errors</a></li>
		<li class="page_item page-item-532"><a href="../../7-coverage-reporting/7-3-using-ignoretestcoverage/index.html">7.3. Using @IgnoreTestCoverage</a></li>
		<li class="page_item page-item-535"><a href="../../7-coverage-reporting/7-4-configuration/index.html">7.4. Configuration</a></li>
	</ul>
</li>
	<li class="page_item page-item-538 page_item_has_children"><a href="../../8-junit-integration/index.html">8. JUnit Integration</a>
	<ul class='children'>
		<li class="page_item page-item-540"><a href="../../8-junit-integration/8-1-the-junit-library/index.html">8.1. The JUnit Library</a></li>
		<li class="page_item page-item-542"><a href="../../8-junit-integration/8-2-declarative-junit-test-class-association/index.html">8.2. Declarative JUnit Test Class Association</a></li>
		<li class="page_item page-item-544"><a href="../../8-junit-integration/8-3-automatic-junit-execution/index.html">8.3. Automatic JUnit Execution</a></li>
		<li class="page_item page-item-546"><a href="../../8-junit-integration/8-4-sureassert-stubs-with-junit/index.html">8.4. Sureassert Stubs with JUnit</a></li>
	</ul>
</li>
</ul>
</li>
<li class="page_item page-item-84"><a href="../../../documentation/index.html">API Reference</a></li>
<li class="page_item page-item-30"><a href="../../../download/index.html">Download</a></li>
<li class="page_item page-item-77"><a href="../../../getting-started/index.html">Tutorial</a></li>
<li class="page_item page-item-32"><a href="../../../licensing/index.html">Licensing</a></li>
<li class="page_item page-item-36"><a href="../../../forums/index.html">Forums</a></li>
<li class="page_item page-item-34"><a href="../../../support/index.html">Support</a></li>
<li class="page_item page-item-203"><a href="../../../about-us/index.html">About Us</a></li>
</ul></div>
			</div><!-- #access -->
		</div><!-- #masthead -->
	</div><!-- #header -->

	<div id="main">

		<div id="container">
			<div id="content" role="main">


				<div id="post-364" class="post-364 page type-page status-publish hentry">
											<h1 class="entry-title">3.4. Sureassert Named Instances</h1>
					
					<div class="entry-content">
						<p>A Sureassert named instance is just an Object with a name. You can assign names to Objects used in testing and then refer to these in your Exemplars.</p>
<p><strong>3.4.1. </strong><strong>Special named instances</strong></p>
<p><strong>3.4.1.1. </strong><strong>null</strong></p>
<p>Use <em>null</em> in SIN Expressions to refer to a null object:</p>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
@Exemplar(args={&quot;null&quot;}, expect=&quot;-1&quot;)
public static int getLength(String str) {

    if (str == null)
        return -1;
    else
        return str.length();
}
</pre>
<p><strong>3.4.1.2. </strong><strong>Referring to the Exemplar&#8217;s Return Value – <em>retval</em></strong></p>
<p>Use <em>retval</em> in SIN Expression <em>expect</em> statements to refer to the value returned by the method-under-test in an Exemplar:</p>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
@Exemplar(args={&quot;'test'&quot;,&quot;10&quot;,&quot;','&quot;}, expect=&quot;=(retval.length(),49)&quot;)
public static String repeat(String str, int numTimes, String separator) {

    StringBuilder retStr = new StringBuilder();
    for (int i = 0; i &lt; numTimes; i++) {
        retStr.append(str);
        if (i &lt; numTimes - 1) {
            retStr.append(separator);
        }
    }
    return retStr.toString();
}
</pre>
<p><strong>3.4.1.3. </strong><strong>Referring to the Object-Under-Test – <em>this</em></strong></p>
<p>Use <em>this</em> in SIN Expressions to refer to the object under test:</p>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
public class Foo {

    private String errorMsg;

    @Exemplar(args={&quot;new RuntimeException('testMsg')&quot;},
                    expect=&quot;this.errorMsg.equals('RuntimeException: testMsg')&quot;)
    public void setError(Throwable e) {

        errorMsg = e.getClass().getSimpleName() + &quot;: &quot; + e.getMessage();
    }
}
</pre>
<p><strong>3.4.1.4. </strong><strong>Referring to Arguments of the Method-Under-Test – $argN</strong></p>
<p>Use $<em>argN</em> in SIN Expressions to refer to an argument object or value, where N is the argument number (starting with 1 for the first argument):</p>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
@Exemplar(args={&quot;l:'entry1','entry2'&quot;,&quot;'entry3'&quot;}, expect=&quot;=($arg1.size(),3)&quot;)
public static  void addToListNoNull(List list, E obj) {

    if (obj != null)
        list.add(obj);
}
</pre>
<p><strong>3.4.1.5. </strong><strong>Referring to the Argument Value in Stub and Verify Matcher Expressions – arg</strong></p>
<p>Use <em>arg</em> in the matcher part of SIN Expressions used for <em>stubs</em> and <em>verify</em> in order to refer to the argument being matched. See the sections on test isolation, stubbing and behaviour verification for more information.</p>
<p>&nbsp;</p>
<p><strong>3.4.2. </strong><strong>Naming instances </strong></p>
<p>You can name objects created by and used within the Sureassert testing context in order that they be used within Exemplars throughout your projects.</p>
<p><strong>3.4.2.1. </strong><strong>Setting <em>name</em></strong></p>
<p>Set the <em>name</em> Exemplar property to assign a name to the value or object returned by the method under test. The name can be anything with the following exceptions:</p>
<ul>
<li>It cannot contain the special named instances (retval, null, this, $arg, arg)</li>
<li>It cannot start with a numeric character</li>
<li>It cannot contain any of the characters: . , [ ] { } ( ) :</li>
<li>It cannot contain spaces</li>
</ul>
<p>Named instances are automatically prefixed with the simple name of the Class to which they belong, separated by the given name with &#8220;/&#8221;. For instance, naming an instance <em>testInstance1</em> in class <em>myproject.myackage.Foo</em> results in a named instance of <em>Foo/testInstance1</em>. Typically you might simplify the name to <em>i1</em> or use a name that makes sense in the context of the class and the test e.g. <em>Package/heavy</em> or <em>Flight/full</em>.</p>
<p>When referring to a named instance from within the same class it is declared, it is not necessary to include the class name prefix. For example when referring to <em>Foo/i1</em> within class <em>myproject.mypackage.Foo</em>, you should just specify <em>i1</em>. When referring to a named instance from another class, use the full name.</p>
<p>If you specify a named instance with a qualified name, you can use anything on the left-hand-side. For example if you had two classes in your workspace <em>package1.Foo</em> and <em>package2.Foo</em>, you might specify an instance name within <em>package2.Foo</em> as <em>P2Foo/i1</em>.</p>
<p>Naming instances in this way also helps you find where they are declared, as you can Ctrl+click on class name portion of the named instance to take you to the declaring class in Eclipse.</p>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
public class Counter {

    private int val;
    private int threshold;

    @Exemplar(name=&quot;i1-5&quot;, args={&quot;1&quot;,&quot;5&quot;})
    public Counter(int val, int threshold) {

        this.val = val;
        this.threshold = threshold;
    }

    @Exemplar(instance=&quot;i1-5&quot;, expect=&quot;=(this.val,2)&quot;)
    public void increment() {

        if (val &lt; threshold)
            val++;
        }
    }
}
</pre>
<p><strong>3.4.2.2. </strong><strong>A word on constructors</strong></p>
<p>As is the case in the example above, it&#8217;s common to use a named Exemplar to create objects-under-test for use in other Exemplars in your workspace (not necessarily within the same class). The <em>retval</em> named instance when used in an Exemplar on a constructor, is the instance created by the constructor.</p>
<p>The <em>name</em> parameter can of course be used on any non-void method however, not just constructors.</p>
<p><strong>3.4.2.3. </strong><strong>Referring to Classes by Name</strong></p>
<p>Classes may be referred to by their simple name if they are classes in the source folders of the projects in your workspace, or if they are java.lang classes (e.g. String). Otherwise you must use the fully-qualified class name, with the package names separated with &#8220;/&#8221; rather than &#8220;.&#8221;. For example:</p>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
String.valueOf(5)

MyProjectClass.someField

com/fooproject/ALibraryClass/someMethod()
</pre>
<p>In addition you can assign your own name to a class. This is generally not recommended but can be useful in some situations, for instance where you have two project classes with the same simple name and don&#8217;t want to use the fully-qualified names in your Exemplars. Use the @NamedClass annotation to do this. Named classes follow the same naming rules as named instances but it&#8217;s recommended you don&#8217;t use the same convention in order to avoid confusing a class with an instance.</p>
<p>For example if you had 2 classes called &#8220;Counter&#8221; in different packages, you might want to name them &#8220;Counter_1&#8221; and &#8220;Counter_2&#8221; :</p>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
package com.myproj1;

@NamedClass(name=&quot;Counter_1&quot;)
public class Counter {
    ...
}
</pre>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
package com.myproj2;

@NamedClass(name=&quot;Counter_2&quot;)
public class Counter {
    ...
}
</pre>
<p><strong>3.4.2.4. </strong><strong>The <em>NamedInstance</em> annotation</strong></p>
<p>The @NamedInstance annotation assigns a name to the instance returned by the default constructor for classes that do not have any declared constructors. You can also use it to assign a name to initialized field values.</p>
<p>Defining a NamedInstance on a class:</p>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
@NamedInstance(name=&quot;i1&quot;)
public class Foo {

    // No constructors (has default no-arg constructor)
    ...
    @Exemplar(args=&quot;i1&quot;)
    public static doSomething(Foo foo) {
        ...
    }
}
</pre>
<p>Defining a NamedInstance on a value returned by a static field:</p>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
public class Foo {

    @NamedInstance(name=&quot;gridMtx_357&quot;)
    public static int[] gridMtx = new int[] {3, 5, 7};
    ...
}
</pre>
<p>Note however that you could also refer to this field directly via <em>Foo.gridMtx</em> so generally assigning a name is not necessary.</p>
<p><strong>3.4.2.5. </strong><strong>Naming the post-execution instance: <em>instanceout</em></strong></p>
<p>Often an Exemplar will set an instance to use, and the method-under-test will alter it in some way. You may want to re-assign the altered instance a new name, which other Exemplars can then use:</p>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
public class Counter {

    private int val;
    private int threshold;

    @Exemplar(name=&quot;i1-5&quot;, args={&quot;1&quot;,&quot;5&quot;})
    public Counter(int val, int threshold) {

        this.val = val;
        this.threshold = threshold;
    }

    @Exemplar(instance=&quot;i1-5&quot;, instanceout=&quot;i2-5&quot;, expect=&quot;=(this.val,2)&quot;)
    public void increment() {

        if (val &lt; threshold)
            val++;
    }

    @Exemplar(instance=&quot;i2-5&quot;, expect=&quot;=(this.val,1)&quot;)
    public void decrement() {

        if (val &gt; 0)
            val--;
    }
}
</pre>
<p>&nbsp;</p>
<p><strong>3.4.3. Cross-Project Dependencies</strong></p>
<p>When you refer to a named instance in a SIN Expression, you introduce a dependency from your Exemplar to the one that names the instance. The naming Exemplar can be in a different project, but only if that project is declared as a dependant project in your project&#8217;s Java Build Path. Eclipse will determine the build order of your projects based on their intra-project dependencies; the same is true of Sureassert.</p>
<p>If you change the code under the Exemplar that names an instance used in other projects, Sureassert is still able to automatically run the Exemplars from the other projects.</p>
<p>&nbsp;</p>
<p><strong>3.4.4. </strong><strong>About Atomic Unit Tests</strong></p>
<p>Best practice dictates that tests should be isolated and independent from one-another, or &#8220;atomic&#8221;. This means that no given test should depend upon another given test to run, i.e. you should be able to run any tests, in any order, and get the same results.</p>
<p>Sureassert may appear to allow users to break this principle by allowing one Exemplar to define a named instance, and another to depend upon that instance.</p>
<p>However, at this point the execution model must be considered. With Sureassert UC, every Exemplar can potentially have a tree of other Exemplars on which it is dependent, but it is not possible to execute such an Exemplar without executing its dependency tree, in the same way you might run a single unit test. The execution model mandates that before running any Exemplar, any dependent are run first. It does this automatically.</p>
<p>When you introduce a dependency on another Exemplar, the execution engine ensures that Exemplars are run in the correct order, regardless of whether you&#8217;re running the whole suite or any part of it. You could think of an Exemplar as &#8220;containing&#8221; as a preparatory step the actions of other Exemplars on which it&#8217;s dependant.</p>
<p>However, it&#8217;s important to note that by introducing multiple dependencies on a mutable object, you will run into problems. If dependent Exemplars change the state of the mutable object, the test results may differ depending on which of the multiple dependent Exemplars are executed first. This is a bad place to be.</p>
<p>Do no use a single mutable named instance in more than one other Exemplar. Where you need to do this, you should use a copy of the instance instead by using the re-execution postfix (&#8220;!&#8221;). See the next section for details.</p>
<p>&nbsp;</p>
<p><strong>3.4.5. </strong><strong>Controlling Re-Execution, Execution Order, and Creating Instance Copies</strong></p>
<p>While it is useful to work with instances returned by other Exemplars, often you will want to do this with many Exemplars, some of which could potentially alter the state of the instance. This is not desirable: in this situation the results of your tests would depend on which of the dependent Exemplars is executed first. You can control this with by explicitly declaring the order of execution with the <em>depends</em> property, but this approach is not recommended.</p>
<p>Instead, you should work with a new copy of the named instance in each dependent Exemplar. This is simple to achieve: just postfix the instance name with an explanation mark (!). This instructs Sureassert to re-execute the Exemplar that defines the named instance before returning the result. The potential drawback is that re-executing the Exemplar introduces more work for the Sureassert Engine which could eventually start to slow your test execution. As long as the method-under-test of the re-executed Exemplar doesn&#8217;t perform any expensive processing, this isn&#8217;t usually a concern.</p>
<p><strong>3.4.5.1. </strong><strong>Caution – avoiding multiple dependencies on a single instance</strong></p>
<p>Here is an example of how <strong>not</strong> to do it. A simple class whose 2 methods both alter the object&#8217;s state:</p>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
public class Counter {

    private int val;
    private int threshold;

    @Exemplar(name=&quot;i1-2&quot;, args={&quot;1&quot;,&quot;2&quot;})
    public Counter(int val, int threshold) {

        this.val = val;
        this.threshold = threshold;
    }

    @Exemplar(instance=&quot;i1-2&quot;, expect=&quot;=(this.val,2)&quot;)
    public void increment() {

        if (val &lt; threshold) 
            val++; 
    }

    @Exemplar(instance=&quot;i1-2&quot;, expect=&quot;=(this.val,0)&quot;)
    public void decrement() {

        if (val &gt; 0)
            val--;
    }
}
</pre>
<p>We define one named instance for use when testing the class&#8217;s methods. However, it is not possible for both Exemplars to work as intended as they both work with the same instance of Counter (i1-2). Either the increment Exemplar will corrupt the test state for the decrement method, or vice-versa.</p>
<p>The execution order of the exemplars is undefined. You could try defining it with <em>depends, </em>but were there several other classes using i1-2, things would get messy.</p>
<p><strong>3.4.5.2. </strong><strong>Using <em>instanceout</em> to re-use a changing instance across a chain of Exemplars</strong></p>
<p>In this example, you could solve the problem using only a single instance by referring to i1-2 only once, and defining <em>instanceout</em>, for instance:</p>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
public class Counter {

    private int val;
    private int threshold;

    @Exemplar(name=&quot;i1-2&quot;, args={&quot;1&quot;,&quot;2&quot;})
    public Counter(int val, int threshold) {

        this.val = val;
        this.threshold = threshold;
    }

    @Exemplar(instance=&quot;i1-2&quot;, instanceout=&quot;i2-2&quot;, expect=&quot;=(this.val,2)&quot;)
    public void increment() {

        if (val &lt; threshold)
            val++;
    }     

    @Exemplar(instance=&quot;i2-2&quot;, instanceout=&quot;i1-2&quot;, expect=&quot;=(this.val,1)&quot;)
    public void decrement() {

        if (val &gt; 0)
            val--;
    }
}
</pre>
<p>This may be the best approach if you&#8217;re happy to chain your tests, but isn&#8217;t always possible when things get complicated.</p>
<p>As a general rule, it isn&#8217;t good practice to directly use mutable named instances in other Exemplars.</p>
<p><strong>3.4.5.3. </strong><strong>Best practice – using the re-execution postfix </strong></p>
<p>Instead, you should just create a new copy of i1-2 for each Exemplar to use. This means re-executing the i1-2 Exemplar. The engine takes care of this: you just need to add the re-execution postfix (&#8220;!&#8221;) to the instance name:</p>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
public class Counter {

    private int val;
    private int threshold;

    @Exemplar(name=&quot;i1-2&quot;, args={&quot;1&quot;,&quot;2&quot;})
    public Counter(int val, int threshold) {

        this.val = val;
        this.threshold = threshold;
    }

    @Exemplar(instance=&quot;i1-2!&quot;, expect=&quot;=(this.val,2)&quot;)
    public void increment() {

        if (val &lt; threshold)             
                val++;     
    } 

    @Exemplar(instance=&quot;i1-2!&quot;, expect=&quot;=(this.val,0)&quot;)
    public void decrement() {

        if (val &gt; 0)
            val--;
    }
}
</pre>
<p>When the Sureassert Engine re-executes an Exemplar to get a new named instance, it doesn&#8217;t re-evaluate the expects conditions as this will have already been done.</p>
<p>Note you can also re-execute Exemplars with a named instanceout – this is particularly useful where you use Exemplars to initialize the state of an Object and you want to re-use that state in several other Exemplars. For example:</p>
<pre class="brush: java; gutter: false; title: ; notranslate" title="">
public class Consignment {

    private int consignmentID;
    private Address address;
    private int deliveryStatus;

    @Exemplar(name=&quot;preinit&quot;, args={&quot;1&quot;})
    public Consignment(int consignmentID) {

        this.consignmentID = consignmentID;
    }

    @Exemplar(instance=&quot;preinit!&quot;, args={&quot;'5a'&quot;,&quot;'AB1234'&quot;}, instanceout=&quot;i1&quot;)
    public void setAddress(String houseNumber, String postalCode) {

        PostalCodeService postalCodeService = new PostalCodeService();
        address = postalCodeService.getAddress(houseNumber, postalCode);
        if (address == null) {
            address = new Address(houseNumber, &quot;-&quot;, &quot;-&quot;, &quot;-&quot;, postalCode, &quot;-&quot;);
        }
    }

    @Exemplars(set={
    @Exemplar(instance=&quot;i1!&quot;, args=&quot;1&quot;),
    @Exemplar(instance=&quot;i1!&quot;, args=&quot;2&quot;) })
    public void deliver(int deliveryFirmID) {

        // Update deliveryStatus and/or other state
    }

}
</pre>
<p>In this example the deliver method alters the state of the Consignment object. We want to test it twice with 2 Exemplars for 2 different delivery firm IDs. Both of these Exemplars need to run with the instance with the set address (i1), but because deliver alters the state of the instance, it&#8217;s important each of the Exemplars is run on its own test instance (object-under-test). This is typically the case with any mutable objects (i.e. objects whose state can change). Therefore we use the re-execution postfix (i1!) to use a new copy of the instance configured by the Exemplar on setAddress.</p>
<p>The Sureassert UC Engine executes the Exemplars on methods in this example in the following order:</p>
<p><code><br />
<strong>Execute Exemplar on constructor</strong></code></p>
<p>1. Consignment</p>
<p><strong>Execute Exemplar on setAddress</strong></p>
<p>2. Consignment re-executed</p>
<p>3. setAddress</p>
<p><strong>Execute Exemplar #1 on </strong><strong>deliver</strong></p>
<p>4. Consignment re-executed</p>
<p>5. setAddress re-executed</p>
<p>6. deliver</p>
<p><strong>Execute Exemplar #2 on </strong><strong>deliver</strong></p>
<p>7. Consignment re-executed</p>
<p>8. setAddress re-executed</p>
<p>9. deliver</p>
<p><strong>3.4.5.4. </strong><strong>Storing and Using the Re-Executed Instance</strong></p>
<p>When using the re-execution postfix (&#8220;!&#8221;), it is possible to store the result as a new named instance. This is achieved by adding a further name after the postfix e.g. i1!a. Adding a name after the &#8220;!&#8221; postfix has the effect of re-executing the Exemplar i1 in the usual way, and storing the result to i1!a. You can then refer to i1!a as a standard named instance elsewhere.</p>
<p><a title="3.3. SIN Expressions" href="../3-3-sin-expressions/index.html">Previous Page</a>   |   <a title="3.5. Specifying and Initializing the Object Under Test" href="../3-5-specifying-and-initializing-the-object-under-test/index.html">Next Page</a>   |   <a title="Guide" href="../../index.html">Table of Contents</a></p>
																	</div><!-- .entry-content -->
				</div><!-- #post-## -->

				
			<div id="comments">


	<p class="nocomments">Comments are closed.</p>



</div><!-- #comments -->


			</div><!-- #content -->
		</div><!-- #container -->


		<div id="primary" class="widget-area" role="complementary">
			<ul class="xoxo">

	
			<li id="search" class="widget-container widget_search">
				<form role="search" method="get" id="searchform" class="searchform" action="http://www.sureassert.com/uc/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="Search" />
				</div>
			</form>			</li>

			<li id="archives" class="widget-container">
				<h3 class="widget-title">Archives</h3>
				<ul>
									</ul>
			</li>

			<li id="meta" class="widget-container">
				<h3 class="widget-title">Meta</h3>
				<ul>
					<li><a href="../../../../wp-login0ddc.html?action=register">Register</a></li>					<li><a href="../../../../wp-login.html">Log in</a></li>
									</ul>
			</li>

					</ul>
		</div><!-- #primary .widget-area -->

	</div><!-- #main -->

	<div id="footer" role="contentinfo">
		<div id="colophon">



			<div id="site-info">
				<a href="../../../index.html" title="Sureassert UC" rel="home">
					Sureassert UC				</a>
				<sup>TM</sup> &nbsp;&nbsp;©2011 N Dolan
			</div><!-- #site-info -->

			<div id="site-generator">
								<a href="http://wordpress.org/"
						title="Semantic Personal Publishing Platform" rel="generator">
					
				</a>
			</div><!-- #site-generator -->

		</div><!-- #colophon -->
	</div><!-- #footer -->

</div><!-- #wrapper -->

<script type='text/javascript' src='../../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore677a.js?ver=3.0.9'></script>
<script type='text/javascript' src='../../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJava677a.js?ver=3.0.9'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "../../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore677a.css?ver=3.0.9";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "../../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault677a.css?ver=3.0.9";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type='text/javascript' src='../../../../wp-includes/js/comment-reply.mine100.js?ver=4.7.2'></script>
<script type='text/javascript' src='../../../../wp-includes/js/wp-embed.mine100.js?ver=4.7.2'></script>
</body>

<!-- Mirrored from www.sureassert.com/uc/guide/3-exemplars/3-4-sureassert-named-instances/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 04 Mar 2017 11:45:50 GMT -->
</html>
